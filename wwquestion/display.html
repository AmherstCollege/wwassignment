<div class="qtext">
    <?php echo $questiontext; ?>
</div>
<div class="qtext">
    <?php echo $problemHTML; ?>
    <input id="resp<?php echo $qid; ?>_seed" name="resp<?php echo $qid; ?>_seed" type="hidden" value="<?php echo $seed; ?>" />
</div>

<?php if ($image) { ?>
    <img class="qimage" src="<?php echo $image; ?>" alt="" />
<?php } ?>

<div class="ablock clearfix">
    <?php if($state->event == QUESTION_EVENTGRADE) { ?>
    <table class="answer">
      <tr class="header">
        <th class="c0">Result</th>
        <th class="c0">Answer</th>
        <th class="c0">Preview</th>
        <th class="c0">Evaluated</th>
        <th class="c0">Errors</th>
      </tr>
      <?php $row = 1; foreach ($answerFields as $answerObj) { ?>
      <tr class="<?php echo 'r'.$row = $row ? 0 : 1; ?>">
        <td class="c0" style="width: 15%;">
          <?php if($answerObj['score'] == 1) { $class = 'correct'; echo "Correct"; } else { $class = 'incorrect'; echo "Incorrect"; } ?>
        </td>
        <td class="c0" style="width: 15%;">
          <?php echo $answerObj['answer']; echo question_get_feedback_image($answerObj['score']); ?>
        </td>
        <td class="c0" style="width: 15%;">
          <?php echo  $answerObj['preview']; ?>
        </td>
        <td class="c0" style="width: 15%;">
          <?php echo $answerObj['evaluated']; ?>
        </td>
        <td class="c0" style="width: 40%;">
          <?php echo $answerObj['answer_msg']; ?>
        </td>
      </tr>
    <?php } ?>
  </table>
  <?php } ?>

  <?php if ($feedback) { ?>
    <div class="feedback">
        <?php echo $feedback; ?>
    </div>
  <?php } ?>
  
  <?php $this->print_question_submit_buttons($question, $state, $cmoptions, $options); ?>
</div>